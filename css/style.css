@font-face{
  font-family:'DigitalNumbers';
  src:url('../DigitalNumbers-Regular.ttf') format('truetype');
  font-weight:400;
  font-style:normal;
  font-display:swap;
}

/* Full-viewport stage with centered console that preserves image aspect */
:root{
  --console-aspect: calc(3427 / 2262);
  --console-scale: 0.75;
  --console-offset: clamp(20px, 6vw, 140px);
  --lcd-left: 0%;
  --lcd-top: 0%;
  --lcd-width: 100%;
  --lcd-height: 100%;
  --console-bg-y: 0%;
}

/* Prevent any scrolling or overscroll gestures on the page */
html,body{
  min-height:100%;
  height:100%;
  margin:0;
  overflow-x:hidden;
  overflow-y:hidden;
  overscroll-behavior:none;
  touch-action:none;
  background-color:#0d0d0d;
  background-image:url('../img/background.png');
  background-size:1760px auto;
  background-repeat:no-repeat;
  background-position:left top;
  background-attachment:fixed;
  display:flex;
  flex-direction:column;
}

main{
  flex:1;
  width:100%;
  display:flex;
  justify-content:center;
  position:relative;
}

#game-wrapper{
  width:100vw;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
  padding:clamp(8px,2vw,24px);
  box-sizing:border-box;
  background:transparent;
}

/* The console element scales to fit inside the viewport while keeping the
   original image aspect ratio (set to your SVG/viewBox ratio). We use the
   min() trick so the console fits both narrow and short viewports. */
#console{
  width:min(calc(92vw * var(--console-scale)), calc(92vh * var(--console-aspect) * var(--console-scale)));
  max-width:100%;
  aspect-ratio:var(--console-aspect);
  max-height:calc(92vh * var(--console-scale));
  position:relative;
  z-index:10;
  filter:drop-shadow(0 20px 40px rgba(0,0,0,0.45));
  isolation:isolate;
  margin:0 auto;
  transform:translateX(var(--console-offset));
  transition:transform 180ms ease-out;
}

#console-bg{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  object-position:center var(--console-bg-y);
  display:block;
  user-select:none;
  z-index:1;
}

/* Make the background cover the console box so it can crop at bottom if needed */
#console::after{
  content:"";
  position:absolute;
  left:20%;
  right:20%;
  height:12%;
  bottom:-10%;
  background:radial-gradient(ellipse at center, rgba(0,0,0,0.55) 0%, rgba(0,0,0,0.45) 38%, rgba(0,0,0,0) 70%);
  filter:blur(28px);
  opacity:0.9;
  z-index:-1;
  pointer-events:none;
}

/* LCD area positioned in % relative to the wrapper */
#lcd{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  pointer-events:none;
  z-index:10;
}

/* SVG inside should stretch to fill lcd box */
#lcd svg{ width:100%; height:100%; display:block }

/* The inlined SVG should fill the LCD box and be visible — it now contains
   the embedded PNG as an <image> element. Keep it pointer-events:none so
   clicks pass through. */
#svg-root{ position:absolute; inset:0; width:100%; height:100%; }
#svg-root svg{ position:absolute; inset:0; width:100%; height:100%; opacity:1; pointer-events:none; z-index:15 }

/* Overlay PNG aligned the same as the SVG (inside #lcd). Placed above the
  inline SVG and masked by the external SVG mask file so only the LCD area
  of the PNG shows. */
/* If an external overlay image exists, keep it hidden — we now use the
   embedded <image> inside the SVG for precise masking/alignment. */
#lcd > #lcd-overlay { display: none; }

[data-role="segments"] use,
[data-role="segments"] image{
  mix-blend-mode: darken;
  filter: brightness(2.4) contrast(0.45);
  opacity:1;
  pointer-events:none;
}

/* LCD overlay blending + opacity to let background texture show through */
#lcd-overlay{
  mix-blend-mode: darken;
  opacity: 0.8;
  pointer-events: none;
  position: absolute;
  left: inherit; top: inherit; width: inherit; height: inherit;
}

#lcd #score-display{
  position:absolute;
  left:28%;
  top:30%;
  z-index:65;
  display:flex;
  flex-direction:column;
  align-items:flex-start;
  gap:2px;
  padding:0;
  background:transparent;
  border-radius:0;
  pointer-events:none;
  width:9.3%;
  font-size:clamp(7px, min(1.2vw, 2vh), 15px);
}

#lcd #score-display .score-label,
#lcd #score-display .score-value{
  display:block;
  width:55%;
  padding-left:2px;
}

#lcd #score-display .score-label{
  font-family:"Inter", "Helvetica Neue", Arial, sans-serif;
  color:rgba(0,0,0,0.74);
  font-size:clamp(0.55em, 2.1vw, 0.95em);
  letter-spacing:0.16em;
  text-transform:uppercase;
  text-align:left;
}

#lcd #score-display .score-label.is-hidden{
  display:none;
}

#lcd #score-display .score-value{
  font-family:"DigitalNumbers", "Share Tech Mono", "DS-Digital", "Digital-7 Mono", "Roboto Mono", monospace;
  font-size:clamp(0.9em, 2.9vw, 1.45em);
  letter-spacing:0.07em;
  color:#050505;
  font-variant-numeric:tabular-nums;
  align-self:stretch;
  text-align:right;
  padding-right:4px;
  white-space:nowrap;
}

#lcd #score-display .score-value.is-message{
  width:100%;
  padding:0;
  text-align:center;
  white-space:pre-line;
  letter-spacing:0.18em;
}

#button-lights{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  pointer-events:none;
  z-index:5;
}

#button-lights svg,
#button-lights .button-lights-svg{
  width:100%;
  height:100%;
  display:block;
}

#button-lights image{
  opacity:0;
  transition:opacity 130ms ease-out;
  mix-blend-mode:screen;
  pointer-events:none;
}

#button-lights image.is-active{
  opacity:1;
}

.console-btn{
  position:absolute;
  border:none;
  background:transparent;
  padding:0;
  margin:0;
  cursor:pointer;
  touch-action:manipulation;
  z-index:25;
  appearance:none;
}

.console-btn:focus-visible{
  outline:2px solid rgba(255,255,255,0.65);
  outline-offset:4px;
}

#btn-left{
  left:6.4%;
  top:64.9%;
  width:11%;
  height:16.4%;
  border-radius:50%;
}

#btn-right{
  left:82.35%;
  top:65.05%;
  width:11%;
  height:16.4%;
  border-radius:50%;
}

#btn-game,
#btn-time,
#btn-alarm{
  left:85.85%;
  width:5.6%;
  height:4.4%;
  border-radius:22px;
}

#btn-game{ top:32.5%; }
#btn-time{ top:25.6%; }
#btn-alarm{ top:18.7%; }

/* Hidden-by-default SVG segments; scripts toggle via style.display */
.lcd-seg{ display:none }

@media (max-width:520px){
  #controls button{ font-size:18px; padding:10px 18px }
  #console{ transform:none; }
}


#highscore-panel{
  position:fixed;
  top:620px;
  left:25px;
  width:210px;
  color:#186595;
  font-family:"Inter","Helvetica Neue",Arial,sans-serif;
  font-size:14px;
  line-height:1.15;
  letter-spacing:0.07em;
  text-transform:uppercase;
  pointer-events:none;
  z-index:3;
  transform:rotate(-7deg);
  transform-origin:top left;
}

#highscore-panel h2{
  margin:0 0 8px;
  font-size:16px;
  font-weight:600;
  letter-spacing:0.12em;
  position:relative;
  padding-bottom:6px;
}

#highscore-panel h2::after{
  content:"";
  position:absolute;
  left:0;
  right:0;
  bottom:0;
  height:1px;
  background:rgba(255,255,255,0.6);
}

#highscore-panel ol{
  list-style:none;
  margin:0;
  padding:0;
  display:flex;
  flex-direction:column;
  gap:0.2em;
}

#highscore-panel li{
  display:grid;
  grid-template-columns:28px 1fr 70px;
  column-gap:10px;
  font-weight:500;
  color:#186595;
  line-height:2;
  align-items:center;
}

#highscore-panel .rank{
  font-weight:600;
  text-align:right;
  color:rgba(24,101,149,0.85);
}

#highscore-panel .name{
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}

#highscore-panel .score{
  width:70px;
  font-variant-numeric:tabular-nums;
  text-align:right;
}
