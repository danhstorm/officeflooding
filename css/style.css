@font-face{
  font-family:'DigitalNumbers';
  src:url('../DigitalNumbers-Regular.ttf') format('truetype');
  font-weight:400;
  font-style:normal;
  font-display:swap;
}

/* Full-viewport stage with centered console that preserves image aspect */
:root{
  --console-aspect: calc(3427 / 2262);
  --lcd-left: 0%;
  --lcd-top: 0%;
  --lcd-width: 100%;
  --lcd-height: 100%;
  --console-bg-y: 0%;
}

/* Prevent any scrolling or overscroll gestures on the page */
html,body{
  min-height:100%;
  height:100%;
  margin:0;
  overflow-x:hidden;
  overflow-y:hidden;
  overscroll-behavior:none;
  touch-action:none;
  background-color:#0d0d0d;
  background-image:url('../img/background.png');
  background-size:cover;
  background-repeat:no-repeat;
  background-position:left top;
  background-attachment:fixed;
  display:flex;
  flex-direction:column;
}

main{
  flex:1;
  width:100%;
  display:flex;
  justify-content:center;
}

#game-wrapper{
  width:100vw;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
  padding:clamp(8px,2vw,24px);
  box-sizing:border-box;
  background:transparent;
}

/* The console element scales to fit inside the viewport while keeping the
   original image aspect ratio (set to your SVG/viewBox ratio). We use the
   min() trick so the console fits both narrow and short viewports. */
#console{
  width:min(92vw, calc(92vh * var(--console-aspect)));
  max-width:100%;
  aspect-ratio:var(--console-aspect);
  max-height:92vh;
  position:relative;
  filter:drop-shadow(0 20px 40px rgba(0,0,0,0.45));
  isolation:isolate;
  margin:0 auto;
}

/* Make the background cover the console box so it can crop at bottom if needed */
#console::after{
  content:"";
  position:absolute;
  left:20%;
  right:20%;
  height:12%;
  bottom:-10%;
  background:radial-gradient(ellipse at center, rgba(0,0,0,0.55) 0%, rgba(0,0,0,0.45) 38%, rgba(0,0,0,0) 70%);
  filter:blur(28px);
  opacity:0.9;
  z-index:-1;
  pointer-events:none;
}

#console-bg{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  object-position:center var(--console-bg-y);
  display:block;
  user-select:none;
}

/* LCD area positioned in % relative to the wrapper */
#lcd{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  pointer-events:none;
}

/* SVG inside should stretch to fill lcd box */
#lcd svg{ width:100%; height:100%; display:block }

/* The inlined SVG should fill the LCD box and be visible — it now contains
   the embedded PNG as an <image> element. Keep it pointer-events:none so
   clicks pass through. */
#svg-root{ position:absolute; inset:0; width:100%; height:100%; }
#svg-root svg{ position:absolute; inset:0; width:100%; height:100%; opacity:1; pointer-events:none; z-index:15 }

/* Overlay PNG aligned the same as the SVG (inside #lcd). Placed above the
  inline SVG and masked by the external SVG mask file so only the LCD area
  of the PNG shows. */
/* If an external overlay image exists, keep it hidden — we now use the
   embedded <image> inside the SVG for precise masking/alignment. */
#lcd > #lcd-overlay { display: none; }

[data-role="segments"] use,
[data-role="segments"] image{
  mix-blend-mode: darken;
  filter: brightness(2.4) contrast(0.45);
  opacity:1;
  pointer-events:none;
}

/* Side buttons for touch/mouse input */
.side-btn{
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 56px;
  height: 56px;
  border-radius: 50%;
  border: none;
  background: rgba(0,0,0,0.6);
  color: white;
  font-size: 22px;
  display: flex;
  align-items: center;
  justify-content: center;
  touch-action: manipulation;
  z-index: 30;
}
.side-btn.left{ left: 2%; }
.side-btn.right{ right: 2%; }

/* Debug helper: add .debug-lcd to #lcd to see its box and help align coordinates */
#lcd.debug{ outline: 2px dashed rgba(255,255,255,0.6); }

/* LCD overlay blending + opacity to let background texture show through */
#lcd-overlay{
  mix-blend-mode: darken;
  opacity: 0.8;
  pointer-events: none;
  position: absolute;
  left: inherit; top: inherit; width: inherit; height: inherit;
}

/* small info HUD */
#lcd-info{ min-width:140px }

#lcd #score-display{
  position:absolute;
  left:26.1%;
  top:33.8%;
  z-index:65;
  display:flex;
  flex-direction:column;
  align-items:flex-start;
  gap:2px;
  padding:0;
  background:transparent;
  border-radius:0;
  pointer-events:none;
  width:9.3%;
  font-size:clamp(7px, min(1.2vw, 2vh), 15px);
}

#lcd #score-display .score-label,
#lcd #score-display .score-value{
  display:block;
  width:100%;
  padding-left:2px;
}

#lcd #score-display .score-label{
  font-family:"Inter", "Helvetica Neue", Arial, sans-serif;
  color:rgba(0,0,0,0.74);
  font-size:clamp(0.55em, 2.1vw, 0.95em);
  letter-spacing:0.16em;
  text-transform:uppercase;
  text-align:left;
}

#lcd #score-display .score-value{
  font-family:"DigitalNumbers", "Share Tech Mono", "DS-Digital", "Digital-7 Mono", "Roboto Mono", monospace;
  font-size:clamp(0.9em, 2.9vw, 1.45em);
  letter-spacing:0.07em;
  color:#050505;
  font-variant-numeric:tabular-nums;
  align-self:stretch;
  text-align:right;
  padding-right:4px;
}

.start-btn{
  position:absolute;
  left:50%;
  bottom:8%;
  transform:translateX(-50%);
  z-index:75;
  padding:10px 24px;
  font-family:monospace;
  font-size:16px;
  letter-spacing:0.2em;
  background:rgba(0,0,0,0.7);
  color:#fff;
  border:1px solid rgba(255,255,255,0.4);
  border-radius:999px;
  cursor:pointer;
  transition:opacity 120ms ease;
}

.start-btn.hidden{
  opacity:0;
  pointer-events:none;
}

.start-btn:focus-visible{
  outline:2px solid #8ef;
  outline-offset:2px;
}

@media (max-width:520px){
  .side-btn{ width:48px;height:48px;font-size:20px }
  #debugToggle{ display:none }
}

/* Alignment panel small responsive tweaks */
#align-panel input, #align-panel select{ background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.08); color:#fff; padding:4px; border-radius:4px }
#align-panel button{ background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.08); color:#fff; border-radius:4px }

/* Hidden-by-default SVG segments; scripts toggle via style.display */
.lcd-seg{ display:none }

/* Debug helper */
#lcd.debug{ outline: 2px dashed rgba(255,255,255,0.12) }

@media (max-width:520px){
  #controls button{ font-size:18px; padding:10px 18px }
}
