@font-face{
  font-family:'DigitalNumbers';
  src:url('../DigitalNumbers-Regular.ttf') format('truetype');
  font-weight:400;
  font-style:normal;
  font-display:swap;
}

/* Full-viewport stage with centered console that preserves image aspect */
:root{
  --console-aspect: calc(4800 / 3398);
  --lcd-left: 32.5%;
  --lcd-top: 35.5%;
  --lcd-width: 35%;
  --lcd-height: 34%;
  --console-bg-y: 0%;
}

#game-wrapper{
  width: 100vw;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #111;
  overflow: hidden;
  position: relative;
}

/* Prevent any scrolling or overscroll gestures on the page */
html,body{
  height:100%;
  margin:0;
  overflow:hidden;
  overscroll-behavior: none;
  touch-action: none;
}

/* The console element scales to fit inside the viewport while keeping the
   original image aspect ratio (set to your SVG/viewBox ratio). We use the
   min() trick so the console fits both narrow and short viewports. */
#console{
  width: min(100vw, 100vh * var(--console-aspect));
  max-width: 100vw;
  aspect-ratio: var(--console-aspect);
  max-height: 100vh;
  position: relative;
}

/* Make the background cover the console box so it can crop at bottom if needed */
#console-bg{
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center var(--console-bg-y);
  display: block;
  user-select: none;
}

/* LCD area positioned in % relative to the wrapper */
#lcd{
  position: absolute;
  left: var(--lcd-left);
  top: var(--lcd-top);
  width: var(--lcd-width);
  height: var(--lcd-height);
  pointer-events: none;
}

/* SVG inside should stretch to fill lcd box */
#lcd svg{ width:100%; height:100%; display:block }

/* The inlined SVG should fill the LCD box and be visible — it now contains
   the embedded PNG as an <image> element. Keep it pointer-events:none so
   clicks pass through. */
#svg-root svg{ position:absolute; inset:0; width:100%; height:100%; opacity:1; pointer-events:none; z-index:15 }

/* Overlay PNG aligned the same as the SVG (inside #lcd). Placed above the
   inline SVG and masked by the external SVG mask file so only the LCD area
   of the PNG shows. */
#lcd { position: absolute; }
/* If an external overlay image exists, keep it hidden — we now use the
   embedded <image> inside the SVG for precise masking/alignment. */
#lcd > #lcd-overlay { display: none; }

[data-role="segments"] use,
[data-role="segments"] image{
  mix-blend-mode: darken;
  filter: brightness(2.4) contrast(0.45);
  opacity:1;
  pointer-events:none;
}

/* Side buttons for touch/mouse input */
.side-btn{
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 56px;
  height: 56px;
  border-radius: 50%;
  border: none;
  background: rgba(0,0,0,0.6);
  color: white;
  font-size: 22px;
  display: flex;
  align-items: center;
  justify-content: center;
  touch-action: manipulation;
  z-index: 30;
}
.side-btn.left{ left: 2%; }
.side-btn.right{ right: 2%; }

/* Debug helper: add .debug-lcd to #lcd to see its box and help align coordinates */
#lcd.debug{ outline: 2px dashed rgba(255,255,255,0.6); }

/* LCD overlay blending + opacity to let background texture show through */
#lcd-overlay{
  mix-blend-mode: darken;
  opacity: 0.8;
  pointer-events: none;
  position: absolute;
  left: inherit; top: inherit; width: inherit; height: inherit;
}

/* small info HUD */
#lcd-info{ min-width:140px }

#lcd #score-display{
  position:absolute;
  left:2.7%;
  top:18.4%;
  z-index:65;
  display:flex;
  flex-direction:column;
  align-items:flex-start;
  gap:1px;
  padding:0;
  background:transparent;
  border-radius:0;
  pointer-events:none;
  width:auto;
  min-width:72px;
  font-size:clamp(7px, min(1.2vw, 2vh), 15px);
}

#lcd #score-display .score-label,
#lcd #score-display .score-value{
  display:block;
  width:100%;
  padding-left:2px;
}

#lcd #score-display .score-label{
  font-family:"Inter", "Helvetica Neue", Arial, sans-serif;
  color:rgba(0,0,0,0.74);
  font-size:0.85em;
  letter-spacing:0.17em;
  text-transform:uppercase;
  text-align:left;
}

#lcd #score-display .score-value{
  font-family:"DigitalNumbers", "Share Tech Mono", "DS-Digital", "Digital-7 Mono", "Roboto Mono", monospace;
  font-size:1.35em;
  letter-spacing:0.07em;
  color:#050505;
  font-variant-numeric:tabular-nums;
  align-self:stretch;
  text-align:right;
  padding-right:1px;
}

.start-btn{
  position:absolute;
  left:50%;
  bottom:8%;
  transform:translateX(-50%);
  z-index:75;
  padding:10px 24px;
  font-family:monospace;
  font-size:16px;
  letter-spacing:0.2em;
  background:rgba(0,0,0,0.7);
  color:#fff;
  border:1px solid rgba(255,255,255,0.4);
  border-radius:999px;
  cursor:pointer;
  transition:opacity 120ms ease;
}

.start-btn.hidden{
  opacity:0;
  pointer-events:none;
}

.start-btn:focus-visible{
  outline:2px solid #8ef;
  outline-offset:2px;
}

@media (max-width:520px){
  .side-btn{ width:48px;height:48px;font-size:20px }
  #debugToggle{ display:none }
}

/* Alignment panel small responsive tweaks */
#align-panel input, #align-panel select{ background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.08); color:#fff; padding:4px; border-radius:4px }
#align-panel button{ background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.08); color:#fff; border-radius:4px }

/* Hidden-by-default SVG segments; scripts toggle via style.display */
.lcd-seg{ display:none }

/* Debug helper */
#lcd.debug{ outline: 2px dashed rgba(255,255,255,0.12) }

@media (max-width:520px){
  #controls button{ font-size:18px; padding:10px 18px }
}
